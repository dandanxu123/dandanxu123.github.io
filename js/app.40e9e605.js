(function(){"use strict";var e={7476:function(e,n,t){var i=t(5130),o=t(6768),a=t(782),l=(0,a.y$)({state:{name:"xdd",changeEventType:{type:"EventType",eventName:"Play"}},getters:{},mutations:{resetEditData(e){e.changeEventType={type:"EventType",eventName:"Play"}}},actions:{resetEditData({commit:e}){e("resetEditData")}},modules:{}}),r=(0,o.pM)({__name:"App",setup(e){return window.addEventListener("message",(e=>{"EventType"===e.data.type&&(l.state.changeEventType={...e.data})}),!1),(e,n)=>{const t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(t)}}});const s=r;var u=s,c=t(1387),d=t(8371),p=t(8776),v=t(144),m=t(1353),f=t(2951),w=t(5533);const y={class:"scene-box"},h={class:"change-btn"};var b=(0,o.pM)({__name:"HomeView",setup(e){new d.zD7;let n=[],t=null,a=1,r=null;const s=(0,v.KR)({intensity:3}),u=(0,v.KR)({intensity:1,x:0,y:2,z:3});let c=null,b=null;const g=()=>{const e=new w.Z;return e.setDecoderPath("/draco/"),e.setDecoderConfig({type:"js"}),e.preload(),e},E=e=>{t!=n[e]&&t.fadeOut(1),n[e].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(1).play(),t=n[e]};(0,o.sV)((()=>{const e=window.innerWidth,i=window.innerHeight,o=new d.ubm(25,window.innerWidth/window.innerHeight,.1,1e3);o.position.z=10;const r=new d.Z58,v=new d.iNn(.2,.2,.2),w=new d.qBx,y=(new d.eaF(v,w),new p.JeP({antialias:!0}));y.setSize(e,i),y.setClearColor(15658734),document.querySelector("#canvas").appendChild(y.domElement);const h=new f.N(o,y.domElement);h.enabled=!1,h.enableRotate=!1,c=new d.ZyN(16777215,u.value.intensity),c.position.set(u.value.x,u.value.y,u.value.z).normalize(),r.add(c),b=new d.$p8(16777215,s.value.intensity),r.add(b);const L=new m.B,x=g();L.setDRACOLoader(x),L.load("/body_anim_1212.glb",(e=>{e.scene.position.set(0,-2,0),e.scene.scale.set(2.35,2.35,2.35),r.add(e.scene);const i=e.animations,s=new d.Iw4(e.scene);console.log(i);const u=s.clipAction(i[2]),c=s.clipAction(i[0]),p=s.clipAction(i[1]),v=s.clipAction(i[3]);c.timeScale=1,c.loop=d.G3T,c.clampWhenFinished=!0,p.timeScale=1,p.loop=d.G3T,p.clampWhenFinished=!0,v.timeScale=1,v.loop=d.G3T,v.clampWhenFinished=!0,c.play(),t=c,n=[u,c,p,v],s.addEventListener("finished",(()=>{const e=l.state.changeEventType.eventName;"Play"==e?k():"Stop"==e&&a&&(E(0),a=0)}));let m=performance.now();function f(){requestAnimationFrame(f);const e=performance.now(),n=(e-m)/1e3;m=e,s.update(n),y.render(r,o),"0px"==y.domElement.style.width&&T(y,o)}f()}),void 0,(e=>{console.error(e)})),window.addEventListener("resize",(()=>{T(y,o)}),!1)}));const T=(e,n)=>{e.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()},k=()=>{1==a?(E(0),clearTimeout(r),r=setTimeout((()=>{E(2),a=2}),1e3),a=0):2==a?(E(0),clearTimeout(r),r=setTimeout((()=>{E(3),a=3}),1e3),a=0):3==a?(E(0),clearTimeout(r),r=setTimeout((()=>{E(1),a=1}),1e3),a=0):(E(1),a=1)};return(0,o.wB)((()=>l.state.changeEventType),(e=>{"Play"==e?.eventName&&k(),"Stop"==e?.eventName&&a&&(E(0),a=0)})),(0,o.wB)(s.value,(e=>{b.intensity=+e.intensity})),(0,o.wB)(u.value,(e=>{c.position.set(+e.x,+e.y,+e.z).normalize(),c.intensity=+e.intensity})),(e,n)=>((0,o.uX)(),(0,o.CE)("div",y,[n[12]||(n[12]=(0,o.Lk)("div",{id:"canvas"},null,-1)),(0,o.Lk)("div",h,[n[10]||(n[10]=(0,o.Lk)("div",null,"环境光",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",null,[n[5]||(n[5]=(0,o.eW)("强度")),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>s.value.intensity=e)},null,512),[[i.Jo,s.value.intensity]])])]),n[11]||(n[11]=(0,o.Lk)("div",null,"方向光",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",null,[n[6]||(n[6]=(0,o.eW)("X")),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>u.value.x=e)},null,512),[[i.Jo,u.value.x]])]),(0,o.Lk)("div",null,[n[7]||(n[7]=(0,o.eW)("Y")),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[2]||(n[2]=e=>u.value.y=e)},null,512),[[i.Jo,u.value.y]])]),(0,o.Lk)("div",null,[n[8]||(n[8]=(0,o.eW)("Z")),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>u.value.z=e)},null,512),[[i.Jo,u.value.z]])]),(0,o.Lk)("div",null,[n[9]||(n[9]=(0,o.eW)("强度")),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>u.value.intensity=e)},null,512),[[i.Jo,u.value.intensity]])])])])]))}}),g=t(1241);const E=(0,g.A)(b,[["__scopeId","data-v-d7a223c8"]]);var T=E;const k=[{path:"/home",name:"home",alias:"/",component:T}],L=(0,c.aE)({history:(0,c.LA)("/"),routes:k});var x=L;const O=(0,i.Ef)(u);O.use(l),O.use(x),O.mount("#app");const z=(e,n,...t)=>{let i=null;return function(){const o=self,a=t;clearTimeout(i),i=setTimeout((function(){e.apply(o,a)}),n)}},W=window.ResizeObserver;window.ResizeObserver=class extends W{constructor(e){e=z(e,16),super(e)}}}},n={};function t(i){var o=n[i];if(void 0!==o)return o.exports;var a=n[i]={exports:{}};return e[i].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,i,o,a){if(!i){var l=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],a=e[c][2];for(var r=!0,s=0;s<i.length;s++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](i[s])}))?i.splice(s--,1):(r=!1,a<l&&(l=a));if(r){e.splice(c--,1);var u=o();void 0!==u&&(n=u)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,o,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var o,a,l=i[0],r=i[1],s=i[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(s)var c=s(t)}for(n&&n(i);u<l.length;u++)a=l[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},i=self["webpackChunknjyi"]=self["webpackChunknjyi"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],(function(){return t(7476)}));i=t.O(i)})();
//# sourceMappingURL=app.40e9e605.js.map